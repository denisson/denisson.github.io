<ion-view hide-nav-bar="false" ng-controller="buscaPorTimesController">
  <ion-nav-title>Buscar times</ion-nav-title>
  <ion-nav-buttons side="right" class="item-select">
      <button class="button" id="botao-escolher-regiao" mostrar-br="false" tem-time="true" abrir-modal="true" ocultar-cancelar="true" filtro="perfilFiltro" jog-escolher-regiao>
        <span ng-if="!perfilFiltro.esporte.efootball" style="display: inline;">Região:</span>
        <b class="padding-left">{{formatarFiltro(perfilFiltro)}}</b>
        <i class="icon ion-android-arrow-dropdown" style="color:#999"></i>
      </button>
  </ion-nav-buttons>
    <ion-content padding="true" class="scroll-with-keyboard">
        <form class="list">
            <label class="item item-input">
                <i class="icon ion-search placeholder-icon"></i>
                <input ng-model="search.query" ng-change="buscarTime(search.query)" type="search" placeholder="Nome do time">
            </label>
        </form>
        <ion-list class="lista-times">
            <!-- <ion-item class="item-avatar item" ui-sref="abasInicio.time-aba-busca({id: time._id})" ng-repeat="time in times | latinize | fuzzyBy:'nome':search"> -->
            <ion-item class="item-avatar item" ui-sref="abasInicio.time-aba-busca({id: time._id})" ng-repeat="time in times track by time._id">
                <img jog-escudo="time.escudo" jog-size="small" style="border-radius: 5px">
                <h2>{{time.nome}}</h2>
                <p>{{time.numeros.vitorias}} vitórias, {{time.numeros.empates}} empates e {{time.numeros.derrotas}} derrotas</p>
            </ion-item>
        </ion-list>
        <ion-infinite-scroll ng-if="dadosCarregados && temMaisResultados" on-infinite="carregarResultados()" distance="10%"></ion-infinite-scroll>
        <ion-list ng-if="!temMaisResultados && timesSemCidade.length" class="lista-times">
            <ion-item class="item-divider" style="border: 0;">Times sem cidade informada</ion-item>
            <!-- <ion-item class="item-avatar item" ui-sref="abasInicio.time-aba-busca({id: time._id})" ng-repeat="time in times | latinize | fuzzyBy:'nome':search"> -->
            <ion-item class="item-avatar item" ui-sref="abasInicio.time-aba-busca({id: time._id})" ng-repeat="time in timesSemCidade track by time._id">
                <img jog-escudo="time.escudo" jog-size="small" style="border-radius: 5px">
                <h2>{{time.nome}}</h2>
                <p>{{time.numeros.vitorias}} vitórias, {{time.numeros.empates}} empates e {{time.numeros.derrotas}} derrotas</p>
            </ion-item>
        </ion-list>
        <ion-infinite-scroll ng-if="dadosCarregados && temMaisResultadosSemCidade" on-infinite="carregarResultadosSemCidade()" distance="10%"></ion-infinite-scroll>
    </ion-content>
</ion-view>